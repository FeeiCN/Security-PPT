(function(){var e="1.0",t="JxMark",n=this,r=n.Jx,i={},o={},a=[],s={NO_DEBUG:0,SHOW_ALL:1},c={debug:1},l=function(e,t,n){return e+="",c.debug&&this.console&&(this.console.out?this.console.out(e,t,n):alert(e+" - 消息类型["+n+"]")),e};try{if(!(r===undefined||r.mark&&r.mark===t))throw Error('"Jx" name is defined in other javascript code !!!');r&&(i=r.VERSIONS,o=r.PACKAGE,a=r.PACKAGES),r=function(e,t){var n=this;if(t)this._init();else if(e){e+="";try{if(!r.VERSIONS[e])throw n=r.VERSIONS[r.DEFAULT_VERSION],Error("没有找到 JET version "+e+", 所以返回默认版本 JET version "+r.DEFAULT_VERSION+"!");n=r.VERSIONS[e]}catch(i){n.out("A.错误：["+i.name+"] "+i.message+", "+i.fileName+", 行号:"+i.lineNumber+"; stack:"+typeof i.stack,2)}}else n=r.VERSIONS[r.DEFAULT_VERSION];return n},r.prototype={version:e,DEBUG:s,option:c,_init:function(){this.constructor=r},$namespace:function(e){var t,n,r=e.split("."),i=window;for(t=0;r.length>t;t+=1)n=r[t],i[n]=i[n]||{},i=i[r[t]];return i},$package:function(){var e,t=arguments[0],r=arguments[arguments.length-1],i=n;if("function"!=typeof r)throw Error("Function required");if("string"==typeof t){if(i=this.$namespace(t),o[t]);else{var s={isLoaded:!0,"package":i,returnValue:e};o[t]=s,a.push(s)}i.packageName=t}else"object"==typeof t&&(i=t);e=r.call(i,this)},checkPackage:function(e){return r.PACKAGES[e]},out:l,debug:function(){},profile:function(){},warn:function(){},error:function(){},startTime:+new Date,about:function(){return this.out("JET (Javascript Extend Tools)\nversion: "+this.version+"\n\nCopyright (c) 2009, All rights reserved.")},toString:function(){return"JET version "+this.version+" !"}},r.VERSIONS=i,r.PACKAGE=o,r.PACKAGES=a,r.VERSIONS[e]=new r(e,!0),r.DEFAULT_VERSION=e,r.mark=t,n.Jet=n.Jx=r}catch(u){l("JET 微内核初始化失败! B.错误：["+u.name+"] "+u.message+", "+u.fileName+", 行号:"+u.lineNumber+"; stack:"+typeof u.stack,1)}})(),Jx().$package(function(e){var t,n,r,i,o,a,s,c,l,u,f,p,d,m,h,g,v,y,b,w,E,S,x,T,_;t=function(e){return e===void 0},n=function(e){return null===e},r=function(e){return(0===e||e)&&e.constructor===Number},o=function(e){return(e===!1||e)&&e.constructor===Boolean},i=function(e){return(""===e||e)&&e.constructor===String},a=function(e){return e&&e.constructor===Object||"[object Object]"==e+""},s=function(e){return e&&e.constructor===Array||"[object Array]"===Object.prototype.toString.call(e)},c=function(e){return e&&e.callee&&r(e.length)?!0:!1},l=function(e){return e&&e.constructor===Function},u=function(e){return t(e)?"undefined":n(e)?"null":r(e)?"number":o(e)?"boolean":i(e)?"string":a(e)?"object":s(e)?"array":c(e)?"arguments":l(e)?"function":"other"},m=function(){return!0},h=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},v=function(e){var t=function(){};return t.prototype=e,new t},f=function(t){return e.isFunction(t)?t:function(){return t}},p=function(){var t,n,r=arguments.length;for(t=0;r>t;t++)try{n=arguments[t]();break}catch(i){e.out("C.错误：["+i.name+"] "+i.message+", "+i.fileName+", 行号:"+i.lineNumber+"; stack:"+typeof i.stack,2)}return n},g=function(e){var t,n,e,r,i=arguments;for(1===i.length?(e=this,t=0):(e=i[0]||{},t=1);arguments.length>t;t++){r=arguments[t];for(n in r){var o=e[n],c=r[n];o!==c&&(!c||!a(c)||s(c)||c.nodeType||l(c)?void 0!==c&&(e[n]=c):(o=e[n]||{},e[n]=g(o,c||(null!=c.length?[]:{}))))}}return e},y=function(){return+new Date},b=function(e,t,n,r,i){var o=e.concat(),a=25;r&&(o=e),window.setTimeout(function(){var r=+new Date;do t.call(n,o.shift());while(o.length>0&&50>+new Date-r);o.length>0?window.setTimeout(arguments.callee,a):i&&i(e)},a)},w=function(e){var t,n=0;for(t in e)e.hasOwnProperty(t)&&n++;return n},d=function(){},E=function(e,t){return t=t||{},e.$$rebuildedFunc=e.$$rebuildedFunc||function(){var n,r,i=this;return n=t.contextObj||i,r=Array.prototype.slice.call(arguments,0),void 0!==r&&(r=r.concat(t.arguments)),t.event===!1&&(r=r.slice(1)),e.apply(n,r)},e.$$rebuildedFunc},S=function(e){var t=Array.prototype.slice,n=t.call(arguments,1);return function(){var r=this;return e.apply(r,n.concat(t.call(arguments)))}},x=function(e,t){var n=Array.prototype.slice,r=n.call(arguments,2);return function(){return e.apply(t,r.concat(n.call(arguments)))}},_=function(){var t=arguments.length,n=arguments[t-1];if(n.init=n.init||function(){},2===t){var r=arguments[0].extend,i=function(){};i.prototype=r.prototype;var o=function(){this.init.apply(this,arguments)};return o.superClass=r.prototype,o.callSuper=function(e,t){var n=Array.prototype.slice,r=n.call(arguments,2),t=o.superClass[t];t&&t.apply(e,r.concat(n.call(arguments)))},o.prototype=new i,o.prototype.constructor=o,e.extend(o.prototype,n),o.prototype.init=function(){n.init.apply(this,arguments)},o}if(1===t){var a=function(){return this.init.apply(this,arguments)};return a.prototype=n,a}};var k=new _({init:function(e,t,n,r,i){var o=e.concat(),a=25;r&&(o=e),this.timeout=window.setTimeout(function(){var r=+new Date;do t.call(n,o.shift());while(o.length>0&&50>+new Date-r);o.length>0?this.timeout=window.setTimeout(arguments.callee,a):i&&i(e)},a)},stop:function(){clearTimeout(this.timeout)}});e.isUndefined=t,e.isNull=n,e.isNumber=r,e.isString=i,e.isBoolean=o,e.isObject=a,e.isArray=s,e.isArguments=c,e.isFunction=l,e.$typeof=u,e.$return=f,e.$try=p,e.emptyFunc=d,e.clone=v,e.getLength=w,e.checkJSON=m,e.random=h,e.extend=g,e.now=y,e.timedChunk=b,e.rebuild=E,e.pass=S,e.bind=x,e.bindNoEvent=T,e.Class=_,e.Chunk=k}),Jx().$package(function(e){e.browserOptions={adjustBehaviors:!0,htmlClass:!0},e.host=window.location.host;var t,n,r,i,o,a=navigator.platform.toLowerCase(),s=navigator.userAgent.toLowerCase(),c=navigator.plugins;i=function(e,t){return e=(""+e).replace(/_/g,"."),t=t||1,e=(e+"").split("."),e=e[0]+"."+(e[1]||"0"),e=Number(e).toFixed(t)},t={getPlatform:function(){return a},name:void 0!=window.orientation?"iPod":(a.match(/mac|win|linux/i)||["unknown"])[0],version:0,iPod:0,iPad:0,iPhone:0,android:0,win:0,linux:0,mac:0,touchDevice:!1,set:function(e,t){this.name=e,this.version=t,this[e]=t}},t[t.name]=!0,(o=s.match(/windows ([\d.]+)/))?t.set("win",i(o[1])):(o=s.match(/windows nt ([\d.]+)/))?t.set("win",i(o[1])):(o=s.match(/linux ([\d.]+)/))?t.set("linux",i(o[1])):(o=s.match(/mac ([\d.]+)/))?t.set("mac",i(o[1])):(o=s.match(/ipod ([\d.]+)/))?t.set("iPod",i(o[1])):(o=s.match(/ipad[\D]*os ([\d_]+)/))?t.set("iPad",i(o[1])):(o=s.match(/iphone ([\d.]+)/))?t.set("iPhone",i(o[1])):(o=s.match(/android ([\d.]+)/))?t.set("android",i(o[1])):0,t.touchDevice="ontouchstart"in window,n={features:{xpath:!!document.evaluate,air:!!window.runtime,query:!!document.querySelector},getPlugins:function(){return c},plugins:{flash:function(){var e=0;if(c&&c.length){var t=c["Shockwave Flash"];t&&t.description&&(e=i(t.description.match(/\b(\d+)\.\d+\b/)[1],1)||e)}else for(var n=13;n--;)try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+n),e=i(n);break}catch(r){}return e}()},getUserAgent:function(){return s},name:"unknown",version:0,ie:0,firefox:0,chrome:0,opera:0,safari:0,mobileSafari:0,adobeAir:0,set:function(e,t){this.name=e,this.version=t,this[e]=t}},(o=s.match(/msie ([\d.]+)/))?n.set("ie",i(o[1])):(o=s.match(/firefox\/([\d.]+)/))?n.set("firefox",i(o[1])):(o=s.match(/chrome\/([\d.]+)/))?n.set("chrome",i(o[1])):(o=s.match(/opera.([\d.]+)/))?n.set("opera",i(o[1])):(o=s.match(/adobeair\/([\d.]+)/))?n.set("adobeAir",i(o[1])):(o=s.match(/version\/([\d.]+).*safari/))?n.set("safari",i(o[1])):0,(o=s.match(/version\/([\d.]+).*mobile.*safari/))?n.set("mobileSafari",i(o[1])):0,t.iPad&&n.set("mobileSafari","0.0"),n.ie&&(document.documentMode?document.documentMode!==Math.floor(n.ie)&&n.set("ie",i(document.documentMode)):document.documentMode=Math.floor(n.ie)),//!!navigator.userAgent.match(/Apple.*Mobile.*Safari/);
r={name:"unknown",version:0,trident:0,gecko:0,webkit:0,presto:0,set:function(e,t){this.name=e,this.version=t,this[e]=t}},(o=s.match(/trident\/([\d.]+)/))?r.set("trident",i(o[1])):(o=s.match(/gecko\/([\d.]+)/))?r.set("gecko",i(o[1])):(o=s.match(/applewebkit\/([\d.]+)/))?r.set("webkit",i(o[1])):(o=s.match(/presto\/([\d.]+)/))?r.set("presto",i(o[1])):0,n.ie&&(6==n.ie?r.set("trident",i("4")):(7==n.ie||8==n.ie)&&r.set("trident",i("5")));var l=function(){if(n.ie&&7>n.ie)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(e){}};e.browserOptions.adjustBehaviors&&l();var u=function(e){return(e+"").replace(/\./gi,"_")},f=function(){var e=document.documentElement,i=[e.className];i.push("javascriptEnabled"),i.push(t.name),i.push(t.name+u(t.version)),i.push(n.name),i.push(n.name+u(n.version)),document.documentMode&&i.push("documentMode_"+document.documentMode),i.push(r.name),i.push(r.name+u(r.version)),n.plugins.flash&&(i.push("flash"),i.push("flash"+u(n.plugins.flash))),window.webTop!==void 0&&window.webTop&&i.push("webTop"),e.className=i.join(" ")};e.browserOptions.htmlClass&&f(),e.platform=t,e.browser=n,e.browser.engine=r}),Jx().$package(function(e){var t,n,r,i,o,a,s,c,l,u,f,p,d,m,h,g,v,y,b,w,E,S,x,T,_,k,L,C,O,A,M,N,I,F,P,D,R,$,H,j,B,X,J,Y,q,W,U,z,V,K,G,Z,Q,et,tt,nt,rt=null;e.dom=e.dom||{},t=e.dom,n=e.browser,Q=t.win?t.win.contentWindow:t.win||window,t.win=Q,t.doc=Q.document;var it=function(e){return e&&Object.prototype.hasOwnProperty.call(e,"classList")};et=function(){return tt?tt:tt="CSS1Compat"===document.compatMode?document.documentElement:document.body},G=function(e){return e?(e=e||window.document,rt=9===e.nodeType?e:e.ownerDocument||t.doc):rt?rt:(e=e||window.document,rt=9===e.nodeType?e:e.ownerDocument||t.doc)},Z=function(e){var n=G(e);return e.document?e:n.defaultView||n.parentWindow||t.win},nt=function(e){return e=e||G(),e.getElementsByTagName("head")?e.getElementsByTagName("head")[0]:e.documentElement},r=function(e,t){return t=t||document,t.getElementById(e)},i=function(e,t){return G(t).getElementsByName(e)},o=function(e,t){var t=t||G();return t.getElementsByTagName(e)},a=function(e){var t=e?e[TEXT_CONTENT]:"";return t===UNDEFINED&&INNER_TEXT in e&&(t=e[INNER_TEXT]),t||""},s=function(t,n,r){var i,o=!1,a=n;do i=a.getAttribute(t),e.isUndefined(i)||e.isNull(i)?a===r?o=!0:a=a.parentNode:o=!0;while(!o);return i},c=function(e,t,n){var r,i=n?n.document:document,o=i.createElement(e),a={"class":function(){o.className=t["class"]},style:function(){w(o,t.style)}};for(r in t)a[r]?a[r]():o.setAttribute(r,t[r]);return o},l=function(e){var t=document.createElement("div");t.innerHTML=e;var n=t.childNodes;return 0===n.length?null:1===n.length?n[0]:n},O=function(e){var t;return t=e?e.scrollHeight:Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),t||0},A=function(e){var t;return t=e?e.scrollWidth:Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),t||0},M=function(e){return e=e||et(),e.clientHeight},N=function(e){return e=e||et(),e.clientWidth},I=function(t){return e.browser.engine.name,t=t||et(),t.offsetHeight},F=function(t){return e.browser.engine.name,t=t||et(),t.offsetWidth},P=function(e){var t;return t=e?e.scrollLeft:Math.max(document.documentElement.scrollLeft,document.body.scrollLeft),t||0},D=function(e){var t;return t=e?e.scrollTop:Math.max(document.documentElement.scrollTop,document.body.scrollTop),t||0},u=function(e,t){"string"==typeof e.className?e.className=t:e.setAttribute("class",t)},f=function(e){return"string"==typeof e.className?e.className:e.getAttribute("class")||""},p=function(){return function(e,t){return e&&t?it(e)?e.classList.contains(t):(" "+f(e)+" ").indexOf(" "+t+" ")>-1:!1}}(),d=function(){return function(e,t){if(e&&t&&!p(e,t))if(it(e))e.classList.add(t);else{var n=f(e);n+=" "+t,u(e,n)}}}(),m=function(){return function(e,t){if(e&&t&&p(e,t))if(it(e))e.classList.remove(t);else{var n=f(e);n=n.replace(RegExp("(?:^|\\s)"+t+"(?:\\s|$)")," "),u(e,n)}}}(),h=function(){return function(e,t){e&&t&&(p(e,t)?m(e,t):d(e,t))}}(),g=function(e,t,n){m(e,t),d(e,n)},v=function(e,n,r){var i=t.node("style",{id:n||"",type:"text/css"});if(i.styleSheet)i.styleSheet.cssText=e;else{var o=document.createTextNode(e);i.appendChild(o)}return t.getDocHead(r).appendChild(i),i},y=function(t,n,r){if(t){var i=e.browser.name;if(("float"===n||"cssFloat"===n)&&(n="ie"===i?"styleFloat":"cssFloat"),"opacity"===n&&"ie"===i&&9>e.browser.ie){var o=100*r;return t.style.filter='alpha(opacity="'+o+'")',t.style.zoom||(t.style.zoom=1),void 0}t.style[n]=r}},b=function(t,n){if(t){var r=Z(t),i=e.browser.name;if(("float"===n||"cssFloat"===n)&&(n="ie"===i?"styleFloat":"cssFloat"),"opacity"===n&&"ie"===i&&9>e.browser.ie){var o=1,a=t.style.filter.match(/opacity=(\d+)/);return a&&a[1]&&(o=a[1]/100),o}if(t.style[n])return t.style[n];if(t.currentStyle)return t.currentStyle[n];if(r.getComputedStyle)return r.getComputedStyle(t,null)[n];if(document.defaultView&&document.defaultView.getComputedStyle){n=n.replace(/([/A-Z])/g,"-$1"),n=n.toLowerCase();var s=document.defaultView.getComputedStyle(t,"");return s&&s.getPropertyValue(n)}}},addStyles=function(e){var t,n;if(document.createStyleSheet)n=document.createStyleSheet();else{t=document.createElement("style");var r=document.getElementsByTagName("head")[0];r.appendChild(t),n=document.styleSheets[document.styleSheets.length-1]}var i=typeof e;if("string"==i)t?t.innerHTML=e:n.cssText=e;else if("object"==i){var o=0;for(selector in e)if(n.insertRule){var a=selector+"{"+e[selector]+"}";n.insertRule(a,o++)}else n.addRule(selector,e[selector],o++)}},S=function(e,t){e.style.cssText+=";"+t},w=function(e,t){e.style.cssText=t},E=function(e){return e.style.cssText},x=function(e,t){var n,r=e.getAttribute("_oldDisplay");n=r?r:b(e,"display"),t?y(e,"display",t):"none"===n?y(e,"display","block"):y(e,"display",n)},T=function(e){var t=b(e,"display");return"none"===t?!1:!0},_=function(e){var t,n=e.getAttribute("_oldDisplay");t=n?n:b(e,"display"),"none"===t?y(e,"display",""):y(e,"display",t)},k=function(e){var t=b(e,"display"),n=e.getAttribute("_oldDisplay");n||("none"===t?e.setAttribute("_oldDisplay",""):e.setAttribute("_oldDisplay",t)),y(e,"display","none")};var ot=function(){for(var e=document.createElement("a").style,t=["webkitTransform","MozTransform","OTransform","msTransform","Transform"],n=t.length;n--;)if(t[n]in e)return t[n]}();(function(){for(var e=document.createElement("a").style,t=["webkitTransition","MozTransition","OTransition","msTransition","Transition"],n=t.length;n--;)if(t[n]in e)return t[n]})(),L=function(e,t,n){var r=e.style[ot]||"";switch(n){case"translate3d":case"translate3d-x":case"translate3d-y":case"translate3d-z":if(/translate3d\([^)]*\)/.test(r)||(r+=" translate3d(0px,0px,0px)"),"translate3d"!=n){var i={x:"$1",y:"$2",z:"$3"},o={"translate3d-x":"x","translate3d-y":"y","translate3d-z":"z"};i[o[n]]=t,t=i}r=r.replace(/translate3d\(([^,]*)px,([^,]*)px,([^,]*)px\)/,"translate3d("+t.x+"px,"+t.y+"px,"+t.z+"px)");break;case"translate":case"translate-x":case"translate-y":if(/translate\([^)]*\)/.test(r)||(r+=" translate(0px,0px)"),"translate"!=n){var i={x:"$1",y:"$2"},o={"translate3d-x":"x","translate3d-y":"y"};i[o[n]]=t,t=i}r=r.replace(/translate\(([^,]*)px,([^,]*)px\)/,"translate("+t.x+"px,"+t.y+"px)");break;case"scale":r=/scale\([^)]*\)/.test(r)?r.replace(/scale\([^)]*\)/,"scale("+t+")"):r+" scale("+t+")";break;case"rotate":r=/rotate\([^)]*\)/.test(r)?r.replace(/rotate\([^)]*\)/,"rotate("+t+"deg)"):r+" rotate("+t+"deg)";break;default:r=t}e.style[ot]=r},C=function(e,t){var n=e.style[ot]||"scale(1) translate(0px, 0px) translate3d(0px, 0px, 0px) rotate(0deg)";switch(t){case"scale":n=/scale\(([^)]*)\)/.exec(n),n=n?Number(n[1]):1;break;case"translate3d":case"translate3d-x":case"translate3d-y":case"translate3d-z":if(n=/translate3d\(([^,]*)px,([^,]*)px,([^,]*)px\)/.exec(n)||[0,0,0,0],"translate3d"!=t){var r={"translate3d-x":1,"translate3d-y":2,"translate3d-z":3};n=Number(n[r[t]])}else n={x:Number(n[1]),y:Number(n[2]),z:Number(n[3])};break;case"translate":case"translate-x":case"translate-y":if(n=/translate\(([^,]*)px,([^,]*)px\)/.exec(n)||[0,0,0],"translate"!=t){var r={"translate-x":1,"translate-y":2};n=Number(n[r[t]])}else n={x:Number(n[1]),y:Number(n[2])};break;case"rotate":n=/rotate\(([^)]*)deg\)/.exec(n),n=n?Number(n[1]):0;break;default:}return n},R=function(t){var n=0,r=0;if(t)if(document.documentElement.getBoundingClientRect&&t.getBoundingClientRect){var i={left:0,top:0,right:0,bottom:0};try{i=t.getBoundingClientRect()}catch(o){return[0,0]}var a=t.ownerDocument,s=e.browser.ie?2:0;n=i.top-s+D(a),r=i.left-s+P(a)}else for(;t.offsetParent;)n+=t.offsetTop,r+=t.offsetLeft,t=t.offsetParent;return[r,n]},$=function(e,t,n){t=parseInt(t)+P(),n=parseInt(n)+D(),j(e,t,n)},H=function(e){var t=R(e);return t[0]=t[0]+P(),t[1]=t[1]+D(),t},j=function(e,t,n){var r=parseInt(b(e,"marginLeft"))||0,i=parseInt(b(e,"marginTop"))||0;y(e,"left",parseInt(t)-r+"px"),y(e,"top",parseInt(n)-i+"px")},B=function(e,t){var n=H(e),r=H(t),i=[];return i[0]=n[0]-r[0],i[1]=n[1]-r[1],i};var at=function(e){return e&&"auto"!=e?parseInt(e.substr(0,e.length-2)):0};X=function(e){return at(t.getStyle(e,"left"))},J=function(e){return at(t.getStyle(e,"top"))},Y=function(e){return at(t.getStyle(e,"width"))},q=function(e){return at(t.getStyle(e,"height"))},U=function(e){e=e||window;var t=e.document;return e.getSelection?""+e.getSelection():t.getSelection?t.getSelection():t.selection?t.selection.createRange().text:void 0},z=function(e){if(void 0!=e.selectionStart&&void 0!=e.selectionEnd){var t=e.selectionStart,n=e.selectionEnd;return e.value.substring(t,n)}return""},V=function(e,t,n){if(!n&&e===t)return!1;if(e.compareDocumentPosition){var r=e.compareDocumentPosition(t);if(20==r||0==r)return!0}else if(e.contains(t))return!0;return!1},K=function(e){var t;return t=n.ie&&7>=n.ie?e.getAttribute("href",4):e.href,t||null};for(var st=o("script"),ct=0;st.length>ct;ct++)"true"==st[ct].getAttribute("hasJx")&&(e.src=st[ct].src);e.src||(e.src=st[st.length-1].src),e.filename=e.src.replace(/(.*\/){0,}([^\\]+).*/gi,"$2"),e.path=e.src.split(e.filename)[0],t.getDoc=G,t.id=r,t.name=i,t.tagName=o,t.getText=a,t.getAttributeByParent=s,t.node=c,t.xnode=l,t.setClass=u,t.getClass=f,t.hasClass=p,t.addClass=d,t.removeClass=m,t.toggleClass=h,t.replaceClass=g,t.createStyleNode=v,t.setStyle=y,t.getStyle=b,t.addStyles=addStyles,t.setCssText=w,t.getCssText=E,t.addCssText=S,t.show=x,t.isShow=T,t.recover=_,t.hide=k,t.setTransform=L,t.getTransform=C,t.getScrollLeft=P,t.getScrollTop=D,t.getScrollHeight=O,t.getScrollWidth=A,t.getClientHeight=M,t.getClientWidth=N,t.getOffsetHeight=I,t.getOffsetWidth=F,t.getClientXY=R,t.setClientXY=$,t.getXY=H,t.setXY=j,t.getRelativeXY=B,t.getPosX=X,t.getPosY=J,t.getWidth=Y,t.getHeight=q,t.getSelection=W,t.getSelectionText=U,t.getTextFieldSelection=z,t.getDocumentElement=et,t.getDocHead=nt,t.contains=V,t.getHref=K}),Jx().$package(function(e){var t=function(){function e(u,f){f=f||document;var p=/^[\w\-_#]+$/.test(u);if(!p&&f.querySelectorAll)return t(f.querySelectorAll(u));if(u.indexOf(",")>-1){for(var d=u.split(/,/g),m=[],h=0,g=d.length;g>h;++h)m=m.concat(e(d[h],f));return l(m)}var v,y=u.match(i),b=y.pop(),w=(b.match(a)||c)[1],E=!w&&(b.match(o)||c)[1],S=!w&&(b.match(s)||c)[1];if(E&&!S&&f.getElementsByClassName)v=t(f.getElementsByClassName(E));else if(v=!w&&t(f.getElementsByTagName(S||"*")),E&&(v=r(v,"className",RegExp("(^|\\s)"+E+"(\\s|$)"))),w){var x=f.getElementById(w);return x?[x]:[]}return y[0]&&v[0]?n(y,v):v}function t(e){try{return Array.prototype.slice.call(e)}catch(t){for(var n=[],r=0,i=e.length;i>r;++r)n[r]=e[r];return n}}function n(e,t,r){var i=e.pop();if(">"===i)return n(e,t,!0);var l,u,f,p=[],d=-1,m=(i.match(a)||c)[1],h=!m&&(i.match(o)||c)[1],g=!m&&(i.match(s)||c)[1],v=-1;for(g=g&&g.toLowerCase();l=t[++v];){u=l.parentNode;do if(f=!g||"*"===g||g===u.nodeName.toLowerCase(),f=f&&(!m||u.id===m),f=f&&(!h||RegExp("(^|\\s)"+h+"(\\s|$)").test(u.className)),r||f)break;while(u=u.parentNode);f&&(p[++d]=l)}return e[0]&&p[0]?n(e,p):p}function r(e,t,n){for(var r,i=-1,o=-1,a=[];r=e[++i];)n.test(r[t])&&(a[++o]=r);return a}var i=/(?:[\w\-\\.#]+)+(?:\[\w+?=([\'"])?(?:\\\1|.)+?\1\])?|\*|>/gi,o=/^(?:[\w\-_]+)?\.([\w\-_]+)/,a=/^(?:[\w\-_]+)?#([\w\-_]+)/,s=/^([\w\*\-_]+)/,c=[null,null],l=function(){var e=+new Date,t=function(){var t=1;return function(n){var r=n[e],i=t++;return r?!1:(n[e]=i,!0)}}();return function(n){for(var r,i=n.length,o=[],a=-1,s=0;i>s;++s)r=n[s],t(r)&&(o[++a]=r);return e+=1,o}}();return e}();e.dom.mini=t}),Jx().$package(function(e){var t,n,r,i,o,a,s,c,l,u,f,p,d,m,h=[];e.event=e.event||{},t=e.event,m=function(t,n){t||(t=window.event);var n=n||t.srcElement,r=document,i=r.documentElement,o=r.body,a={_event:t,type:t.type,target:t.srcElement,currentTarget:n,relatedTarget:t.fromElement?t.fromElement:t.toElement,eventPhase:t.srcElement==n?2:3,clientX:t.clientX,clientY:t.clientY,screenX:t.screenX,screenY:t.screenY,layerX:t.offsetX,layerY:t.offsetY,pageX:t.clientX+(i&&i.scrollLeft||o&&o.scrollLeft||0)-(i&&i.clientLeft||o&&o.clientLeft||0),pageY:t.clientY+(i&&i.scrollTop||o&&o.scrollTop||0)-(i&&i.clientTop||o&&o.clientTop||0),wheelDelta:t.wheelDelta,altKey:t.altKey,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,charCode:t.keyCode,keyCode:t.keyCode,stopPropagation:function(){this._event.cancelBubble=!0},preventDefault:function(){this._event.returnValue=!1}},s=t.type.toLowerCase();if("mouseover"==s?a.relatedTarget=t.fromElement:"mouseout"==s&&(a.relatedTarget=t.toElement),!e.isUndefined(t.button)){var c=t.button,l={0:-1,1:0,2:2,3:-1,4:1};a.button=e.isUndefined(l[c])?c:l[c]}return a},e.browser.ie?(n=function(e,t,n,i){return a["on"+t]?(a["on"+t](e,t,n,i),void 0):(r(e,t,n),void 0)},r=function(e,n,r){if(-1==t._find(arguments)){var i=function(t){var n=m(t,e);Function.prototype.call?r.call(e,n):(e._currentHandler=r,e._currentHandler(n),e._currentHandler=null)};e.attachEvent("on"+n,i);var o={element:e,eventType:n,handler:r,wrappedEvent:i},a=e.document||e,s=a.parentWindow||window,c=t._uid();s._allHandlers||(s._allHandlers={}),s._allHandlers[c]=o,e._handlers||(e._handlers=[]),e._handlers.push(c),s._onunloadEventRegistered||(s._onunloadEventRegistered=!0,s.attachEvent("onunload",t._removeAllEvents))}},i=function(e,t,n){return a["off"+t]?(a["off"+t](e,t,n),void 0):(3==arguments.length?o(e,t,n):o(e,t),void 0)},o=function(e){var n=t._find(arguments);if(-1!=n){for(var r=e.document||e,i=r.parentWindow||window,o=0;n.length>o;o++){var a=n[o],s=e._handlers[a],c=i._allHandlers[s];e.detachEvent("on"+c.eventType,c.wrappedEvent),e._handlers[a]=null,e._handlers.splice(a,1),delete i._allHandlers[s]}e._handlers&&0==e._handlers.length&&(e._handlers=null)}},t._find=function(e){var t=e[0],n=e[1],r=e[2],i=t._handlers;if(!i)return-1;var o=t.document||t,a=o.parentWindow||window,s=[];if(3===e.length)for(var c=i.length-1;c>=0;c--){var l=i[c],u=a._allHandlers[l];if(u.eventType==n&&u.handler==r)return s.push(c),s}else if(2===e.length){for(var c=i.length-1;c>=0;c--){var l=i[c],u=a._allHandlers[l];u.eventType==n&&s.push(c)}if(s.length>0)return s}else if(1===e.length){for(var c=i.length-1;c>=0;c--)s.push(c);if(s.length>0)return s}return-1},t._removeAllEvents=function(){var e,t=this;for(e in t._allHandlers){var n=t._allHandlers[e];n.element.detachEvent("on"+n.eventType,n.wrappedEvent),n.element._handlers=null,delete t._allHandlers[e]}},t._counter=0,t._uid=function(){return"h"+t._counter++}):document.addEventListener&&(n=function(e,t,n,i){return a["on"+t]?(a["on"+t](e,t,n,i),void 0):(r(e,t,n),void 0)},r=function(t,n,r){var i=!1;t||e.out("targetModel undefined:"+n+r),t._eventTypes||(t._eventTypes={}),t._eventTypes[n]||(t._eventTypes[n]=[]),t.addEventListener(n,r,!1);for(var o=t._eventTypes[n],a=0;o.length>a;a++)if(o[a]==r){i=!0;break}i||o.push(r)},i=function(e,t,n){return a["off"+t]?(a["off"+t](e,t,n),void 0):(3==arguments.length?o(e,t,n):o(e,t),void 0)},o=function(e,t,n){if(t){if(3==arguments.length){if(n&&(e.removeEventListener(t,n,!1),e._eventTypes&&e._eventTypes[t]))for(var r=e._eventTypes[t],i=0;r.length>i;i++)if(r[i]===n){r[i]=null,r.splice(i,1);break}}else if(e._eventTypes&&e._eventTypes[t]){for(var r=e._eventTypes[t],i=0;r.length>i;i++)e.removeEventListener(t,r[i],!1);e._eventTypes[t]=[]}}else if(e._eventTypes){var o=e._eventTypes;for(var a in o)for(var r=e._eventTypes[a],i=0;r.length>i;i++)e.removeEventListener(a,r[i],!1);o={}}}),a={ondrag:function(n,r,i){var o,a,s,c=!1,l=function(r){if(e.browser.mobileSafari||0===r.button){var i;s=r,e.browser.mobileSafari?(r.stopPropagation(),i=r.touches[0],o=i.pageX,a=i.pageY):(r.stopPropagation(),("image"===r.target.getAttribute("eltype")||"text"===r.target.getAttribute("eltype"))&&r.preventDefault(),o=r.clientX,a=r.clientY),c=!1,e.browser.mobileSafari?(t.addEventListener(document,"touchmove",u),t.addEventListener(n,"touchend",f)):t.addEventListener(document,"mousemove",u)}},u=function(r){if(e.browser.mobileSafari||0===r.button){var l,p,d;r.stopPropagation(),e.browser.mobileSafari?(d=r.changedTouches[0],l=d.pageX,p=d.pageY):(l=r.clientX,p=r.clientY),Math.abs(o-l)+Math.abs(a-p)>2&&(e.browser.mobileSafari?(t.removeEventListener(document,"touchmove",u),t.removeEventListener(n,"touchend",f)):t.removeEventListener(document,"mousemove",u),c||(i.call(n,r,s),c=!0))}},f=function(n){(e.browser.mobileSafari||0===n.button)&&(e.browser.mobileSafari?(t.removeEventListener(document,"touchmove",u),c&&(n.stopPropagation(),n.preventDefault())):t.removeEventListener(document,"mousemove",u))};e.browser.mobileSafari?t.addEventListener(n,"touchstart",l):(t.addEventListener(n,"mousedown",l),t.addEventListener(n,"mouseup",f)),h.push({element:n,eventType:r,handler:i,actions:[l,f]})},offdrag:function(n,r,i){for(var o in h)if(h[o].handler==i&&h[o].element==n&&h[o].eventType==r){e.browser.mobileSafari?(t.removeEventListener(n,"touchstart",h[o].actions[0]),t.removeEventListener(n,"touchend",h[o].actions[1])):(t.removeEventListener(n,"mousedown",h[o].actions[0]),t.removeEventListener(n,"mouseup",h[o].actions[1])),h.splice(o,1);break}},oncustomclick:function(n,r,i,o){var a,s,c,l=!1,u=!1,f=0,o=o?o:{},p=o.longtouchable,d=-1,m=function(r){if(f=r.timeStamp,l=!1,e.browser.mobileSafari||0===r.button){var o;e.browser.mobileSafari?(o=r.changedTouches[0],a=o.pageX,s=o.pageY):(a=r.clientX,s=r.clientY),u=!1,p&&(c=setTimeout(function(){if(!l&&!u){var o=2e3;e.browser.mobileSafari?(t.removeEventListener(n,"touchmove",v),t.removeOriginalEventListener(n,"touchend",y)):(t.removeEventListener(n,"mousemove",v),t.removeOriginalEventListener(n,"click",y)),i.call(n,r,o)}},1e3)),e.browser.mobileSafari?(t.addEventListener(n,"touchmove",v),t.addOriginalEventListener(n,"touchend",y)):(t.addEventListener(n,"mousemove",v),t.addOriginalEventListener(n,"click",y))}},g=function(t){d=t.button,(e.browser.mobileSafari||0===t.button)&&e.browser.mobileSafari&&(touch=t.changedTouches[0],touch.pageX,touch.pageY)},v=function(r){if(e.browser.mobileSafari){touch=r.changedTouches[0];var i=touch.pageX,o=touch.pageY}else var i=r.clientX,o=r.clientY;l=Math.abs(a-i)+Math.abs(s-o)>1,l&&(clearTimeout(c),c=null,e.browser.mobileSafari?(t.removeEventListener(n,"touchmove",v),t.removeOriginalEventListener(n,"touchend",y)):(t.removeEventListener(n,"mousemove",v),t.removeOriginalEventListener(n,"click",y)))},y=function(t){if(clearTimeout(c),c=null,u=!0,e.browser.mobileSafari||0===d){var r,o=0;if(e.browser.mobileSafari){r=t.changedTouches[0];var f=r.pageX,p=r.pageY}else var f=t.clientX,p=t.clientY;1>Math.abs(a-f)+Math.abs(s-p)&&(l=!1,i.call(n,t,o))}};e.browser.mobileSafari?t.addEventListener(n,"touchstart",m):(t.addEventListener(n,"mousedown",m),t.addEventListener(n,"mouseup",g)),h.push({element:n,eventType:r,handler:i,actions:[m,v,g,y]})},offcustomclick:function(n,r,i){for(var o in h)if(h[o].handler==i&&h[o].element==n&&h[o].eventType==r){e.browser.mobileSafari?(t.removeEventListener(n,"touchstart",h[o].actions[0]),t.removeEventListener(n,"touchmove",h[o].actions[1]),t.removeOriginalEventListener(n,"touchend",h[o].actions[3])):(t.removeEventListener(n,"mousedown",h[o].actions[0]),t.removeEventListener(n,"mousemove",h[o].actions[1]),t.removeEventListener(n,"mouseup",h[o].actions[2]),t.removeOriginalEventListener(n,"click",h[o].actions[3])),h.splice(o,1);break}},oncontextmenu:function(n,r,i){if(9==e.browser.ie){var o=function(e){var t=m(e,n);i.call(n,t)};n.attachEvent("oncontextmenu",o),h.push({element:n,eventType:r,handler:i,actions:[o]})}else t.addOriginalEventListener(n,r,i)},offcontextmenu:function(n,r,i){if(9==e.browser.ie){for(var o in h)if(h[o].handler==i&&h[o].element==n&&h[o].eventType==r){n.detachEvent("oncontextmenu",h[o].actions[0]),h.splice(o,1);break}}else t.removeOriginalEventListener(n,r,i)},onmousewheel:function(n,r,i){if(e.browser.firefox){var o=function(e){e.wheelDelta=-40*e.detail,i.call(n,e)};t.addOriginalEventListener(n,"DOMMouseScroll",o),h.push({element:n,eventType:r,handler:i,actions:[o]})}else t.addOriginalEventListener(n,"mousewheel",i)},offmousewheel:function(n,r,i){if(e.browser.firefox){for(var o in h)if(h[o].handler==i&&h[o].element==n&&h[o].eventType==r){t.removeOriginalEventListener(n,"DOMMouseScroll",h[o].actions[0]),h.splice(o,1);break}}else t.removeOriginalEventListener(n,"mousewheel",i)},onmouseenter:function(e,n,r){var i=function(e){var t=e.relatedTarget;if(t)if(this.compareDocumentPosition){var n=this.compareDocumentPosition(t);t!=this&&20!=n&&0!=n&&r.call(this,e)}else t==this||this.contains(t)||r.call(this,e);else r.call(this,e)};t.addEventListener(e,"mouseover",i),h.push({element:e,eventType:n,handler:r,actions:[i]})},offmouseenter:function(e,n,r){for(var i in h)if(h[i].handler==r&&h[i].element==e&&h[i].eventType==n){t.removeEventListener(e,"mouseover",h[i].actions[0]),h.splice(i,1);break}},onmouseleave:function(e,n,r){var i=function(e){var t=e.relatedTarget;if(t)if(this.compareDocumentPosition){var n=this.compareDocumentPosition(t);20!=n&&0!=n&&r.call(this,e)}else this.contains(t)||r.call(this,e);else r.call(this,e)};t.addEventListener(e,"mouseout",i),h.push({element:e,eventType:n,handler:r,actions:[i]})},offmouseleave:function(e,n,r){for(var i in h)if(h[i].handler==r&&h[i].element==e&&h[i].eventType==n){t.removeEventListener(e,"mouseout",h[i].actions[0]),h.splice(i,1);break}},oninput:function(n,r,i){if(e.browser.ie){var o=function(e){if("value"==e.propertyName.toLowerCase()){var t=m(e,n);i.call(n,t)}};n.attachEvent("onpropertychange",o),h.push({element:n,eventType:r,handler:i,actions:[o]}),9==e.browser.ie&&t.addOriginalEventListener(n,"change",i)}else t.addOriginalEventListener(n,"input",i)},offinput:function(n,r,i){if(e.browser.ie){for(var o in h)if(h[o].handler==i&&h[o].element==n&&h[o].eventType==r){n.detachEvent("onpropertychange",h[o].actions[0]),h.splice(o,1);break}9==e.browser.ie&&t.removeOriginalEventListener(n,"change",i)}else t.removeOriginalEventListener(n,"input",i)}},s=function(e){return s.done?e():(s.timer?s.ready.push(e):(s.ready=[e],t.on(window,"load",c),s.timer=window.setInterval(c,300)),void 0)},c=function(){if(s.done)return!0;if(document&&document.getElementsByTagName&&document.getElementById&&document.body){s.done=!0,window.clearInterval(s.timer),s.timer=null;for(var e=0;s.ready.length>e;e++)s.ready[e]();return s.ready=null,!0}},l=function(){this.subscribers=[]},l.prototype.subscribe=function(t){var n=e.array.some(this.subscribers,function(e){return e===t});return n||this.subscribers.push(t),t},l.prototype.deliver=function(t){e.array.forEach(this.subscribers,function(e){e(t)})},l.prototype.unsubscribe=function(t){return this.subscribers=e.array.filter(this.subscribers,function(e){return e!==t}),t},u=function(t,n,r){var i,o,a,s;if(r){for(n="on"+n,t._$events||(t._$events={}),t._$events[n]?0==t._$events[n].length&&(t._$events[n]=[]):t._$events[n]=[],i=t._$events[n],o=i.length,a=-1,s=0;o>s;s++){var c=i[s];if(c==r){a=s;break}}-1===a&&i.push(r)}else e.out(">>> 添加的观察者方法不存在："+t+n+r)},f=function(e){var t=e.targetModel,n=e.eventMapping;for(var r in n)u(t,r,n[r])};var g=function(e){return[].slice.call(e)};p=function(e,t){var n,r,i;t="on"+t;var o=!0;if(e._$events&&e._$events[t]&&(n=e._$events[t],n.length>0))for(r=g(arguments).slice(2),i=0;n.length>i;i++)n[i].apply(e,r)===!1&&(o=!1);return o},d=function(e,t,n){var r,i,o,a=!1,s=e._$events;if(n){if(s&&(t="on"+t,i=s[t]))for(o=i.length,r=0;o>r;r++)if(i[r]==n){i[r]=null,i.splice(r,1),a=!0;break}}else if(t){if(s&&(t="on"+t,i=s[t])){for(o=i.length,r=0;o>r;r++)i[r]=null;delete s[t],a=!0}}else if(e&&s){for(r in s)delete s[r];delete e._$events,a=!0}return a},t.addEventListener=n,t.removeEventListener=i,t.addOriginalEventListener=r,t.removeOriginalEventListener=o,t.on=t.addEventListener,t.off=t.removeEventListener,t.onDomReady=s,t.Publish=l,t.customEvent=a,t.customEventHandlers=h,t.addObserver=u,t.addObservers=f,t.notifyObservers=p,t.removeObserver=d}),Jx().$package(function(e){var t=window.location.host;e.cookie={set:function(e,n,r,i,o){if(o){var a=new Date,s=new Date;s.setTime(a.getTime()+36e5*o)}return window.document.cookie=e+"="+n+"; "+(o?"expires="+s.toGMTString()+"; ":"")+(i?"path="+i+"; ":"path=/; ")+(r?"domain="+r+";":"domain="+t+";"),!0},get:function(e){var t=RegExp("(?:^|;+|\\s+)"+e+"=([^;]*)"),n=window.document.cookie.match(t);return n?n[1]:""},remove:function(e,n,r){window.document.cookie=e+"=; expires=Mon, 26 Jul 1997 05:00:00 GMT; "+(r?"path="+r+"; ":"path=/; ")+(n?"domain="+n+";":"domain="+t+";")}}}),Jx().$package(function(e){e.localStorage={setItem:function(e,t){this.isSupports()&&window.localStorage.setItem(e,t)},getItem:function(e){return this.isSupports()?window.localStorage.getItem(e):null},removeItem:function(e){this.isSupports()&&window.localStorage.removeItem(e)},clear:function(){this.isSupports()&&window.localStorage.clear()},isSupports:function(){return"localStorage"in window&&null!==window.localStorage}}}),Jx().$package(function(e){e.array=e.array||{};var t,n,r,i,o,a,s,c,l,u,f,p,d,m,h,g,v,y,b,w=e.array;t=Array.prototype.indexOf?function(){var e=Array.prototype.slice.call(arguments,1);return Array.prototype.indexOf.apply(arguments[0],e)}:function(e,t,n){null==n?n=0:0>n&&(n=Math.max(0,e.length+n));for(var r=n;e.length>r;r++)if(e[r]===t)return r;return-1},n=Array.prototype.lastIndexOf?function(){var e=Array.prototype.slice.call(arguments,1);return Array.prototype.lastIndexOf.apply(arguments[0],e)}:function(e,t,n){null==n?n=e.length-1:0>n&&(n=Math.max(0,e.length+n));for(var r=n;r>=0;r--)if(e[r]===t)return r;return-1},r=Array.prototype.forEach?function(){var e=Array.prototype.slice.call(arguments,1);return Array.prototype.forEach.apply(arguments[0],e)}:function(e,t){var n=e.length;if("function"!=typeof t)throw new TypeError;for(var r=arguments[2],i=0;n>i;i++)i in e&&t.call(r,e[i],i,e)},i=Array.prototype.filter?function(){var e=Array.prototype.slice.call(arguments,1);return Array.prototype.filter.apply(arguments[0],e)}:function(e,t){var n=e.length;if("function"!=typeof t)throw new TypeError;for(var r=[],i=arguments[2],o=0;n>o;o++)if(o in e){var a=e[o];t.call(i,a,o,e)&&r.push(a)}return r},o=Array.prototype.some?function(){var e=Array.prototype.slice.call(arguments,1);return Array.prototype.some.apply(arguments[0],e)}:function(e,t){var n=e.length;if("function"!=typeof t)throw new TypeError;for(var r=arguments[2],i=0;n>i;i++)if(i in e&&t.call(r,e[i],i,e))return!0;return!1},a=Array.prototype.map?function(){var e=Array.prototype.slice.call(arguments,1);return Array.prototype.map.apply(arguments[0],e)}:function(e,t){var n=e.length;if("function"!=typeof t)throw new TypeError;for(var r=Array(n),i=arguments[2],o=0;n>o;o++)o in e&&(r[o]=t.call(i,e[o],o,e));return r},s=Array.prototype.every?function(){var e=Array.prototype.slice.call(arguments,1);return Array.prototype.every.apply(arguments[0],e)}:function(e,t){var n=e.length;if("function"!=typeof t)throw new TypeError;for(var r=arguments[2],i=0;n>i;i++)if(i in e&&!t.call(r,e[i],i,e))return!1;return!0},c=Array.prototype.reduce?function(){var e=Array.prototype.slice.call(arguments,1);return Array.prototype.reduce.apply(arguments[0],e)}:function(e,t){var n=e.length>>>0;if("function"!=typeof t)throw new TypeError;if(0==n&&2==arguments.length)throw new TypeError;var r=0;if(arguments.length>=3)var i=arguments[2];else for(;;){if(r in e){i=e[r++];break}if(++r>=n)throw new TypeError}for(;n>r;r++)r in e&&(i=t.call(null,i,e[r],r,e));return i},l=Array.prototype.reduceRight?function(){var e=Array.prototype.slice.call(arguments,1);return Array.prototype.reduceRight.apply(arguments[0],e)}:function(e,t){var n=e.length>>>0;if("function"!=typeof t)throw new TypeError;if(0==n&&2==arguments.length)throw new TypeError;var r=n-1;if(arguments.length>=3)var i=arguments[2];else for(;;){if(r in e){i=e[r--];break}if(0>--r)throw new TypeError}for(;r>=0;r--)r in e&&(i=t.call(null,i,e[r],r,e));return i},u=function(t){var n=e.$typeof(t);return n?"array"!=n&&"arguments"!=n?[t]:t:[]},f=function(e,t){var n,r,t=u(t),i=!1;for(n=0;t.length>n;n++)for(r=0;e.length>r;r++)e[r]===t[n]&&(e.splice(r,1),i=!0);return i},p=function(e,t,n){var r;for(r=0;e.length>r;ij++)if(e[r]===t)return e[r]=n,!0;return!1},d=function(e,t){t=t||function(e,t){return e-t};for(var n,r,i=e.length,o=0;i-1>o;o++){r=!1;for(var a=i-1;a>o;a--)0>t(e[a],e[a-1])&&(r=!0,n=e[a-1],e[a-1]=e[a],e[a]=n);if(!r)break}return e},m=function(e,t,n){for(var r=0,i=e.length,o=Math.floor(e.length/2);i!=o;)n(t,e[o])>0?r=o+1:i=o,o=Math.floor((r+i)/2);return o},h=function(e,n){return t(e,n)>-1},g=function(e){for(var t=[],n=0,r=e.length;r>n;n++)h(t,e[n])||t.push(e[n]);return t},v=function(e,t){for(var n=[],r=0,i=e.length;i>r;r++)h(t,e[r])&&n.push(e[r]);return n},y=function(e,t){for(var n=[],r=0,i=e.length;i>r;r++)h(t,e[r])||n.push(e[r]);return n},b=function(e,t){return g(e.concat(t))},w.indexOf=t,w.lastIndexOf=n,w.forEach=r,w.filter=i,w.some=o,w.map=a,w.every=s,w.reduce=c,w.reduceRight=l,w.toArray=u,w.remove=f,w.replace=p,w.bubbleSort=d,w.binarySearch=m,w.contains=h,w.uniquelize=g,w.intersect=v,w.minus=y,w.union=b}),Jx().$package(function(e){var t,n,r,i,o,a,s=e.dom.id,c=e.dom,l=e.event;window.XMLHttpRequest===void 0&&(window.XMLHttpRequest=function(){return new window.ActiveXObject(navigator.userAgent.indexOf("MSIE 5")>=0?"Microsoft.XMLHTTP":"Msxml2.XMLHTTP")}),e.http=e.http||{},t=function(e,t){var n,r,i,o=!1,a=!1;return t={method:t.method||"GET",data:t.data||null,arguments:t.arguments||null,onSuccess:t.onSuccess||function(){},onError:t.onError||function(){},onComplete:t.onComplete||function(){},onTimeout:t.onTimeout||function(){},isAsync:t.isAsync||!0,timeout:t.timeout?t.timeout:3e4,contentType:t.contentType?t.contentType:"utf-8",type:t.type||"xml"},e=e||"",i=t.timeout,n=new window.XMLHttpRequest,n.open(t.method,e,t.isAsync),n.setRequestHeader("Content-Type",t.contentType),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),r=function(e){try{return!e.status&&"file:"==location.protocol||e.status>=200&&300>e.status||304==e.status||navigator.userAgent.indexOf("Safari")>-1&&e.status===void 0}catch(t){}return!1},n.onreadystatechange=function(){if(4==n.readyState){if(!o){var i={};i.responseText=n.responseText,i.responseXML=n.responseXML,i.data=t.data,i.status=n.status,i.uri=e,i.arguments=t.arguments,r(n)?("script"===t.type&&eval.call(window,data),t.onSuccess(i)):t.onError(i),t.onComplete(i)}a=!0,n=null}},n.send(t.data),window.setTimeout(function(){var n;a||(o=!0,n={},n.uri=e,n.arguments=t.arguments,t.onTimeout(n),t.onComplete(n))},i),n},n=function(t,n){t=t||"",n={method:n.method||"GET",data:n.data||null,arguments:n.arguments||null,callback:n.callback||function(){},onLoad:n.onLoad||function(){},contentType:n.contentType?n.contentType:"utf-8"};var r;if(e.browser.ie){var i=new ActiveXObject("htmlfile");i.open(),i.close();var o=i.createElement("div");i.appendChild(o),i.parentWindow._parent=self,o.innerHTML='<iframe id="_cometIframe" src="'+t+"?callback=window.parent._parent."+n.callback+'"></iframe>',r=i.getElementById("_cometIframe")}else r=c.node("iframe"),r.setAttribute("id","_cometIframe"),r.setAttribute("src",t+"?callback=window.parent._parent."+n.callback),r.style.position="absolute",r.style.visibility="hidden",r.style.left=r.style.top="-999px",r.style.width=r.style.height="1px",document.body.appendChild(r),self._parent=self;
return l.on(r,"load",n.onLoad),r},r=function(t,n,i){var o,a,u,f,p,d,m,h,g=document.getElementsByTagName("head")?document.getElementsByTagName("head")[0]:document.documentElement,v=!1,y=!1,i=i||{},b=i.isDefer||!1,w=i.query||null,E=i.arguments||null,S=i.onSuccess||function(){},x=i.onError||function(){},T=i.onComplete||function(){},_=i.onTimeout||function(){},k=i.timeout,L=i.charset?i.charset:"utf-8",C=i.win||window;n=n||"",null!==w&&(n=n+"?"+w),h=function(){return r.Id++},f=h(),d=function(e){var t=s("jet_load_"+e);t&&g.removeChild(t)},a=function(e,t,n){var r=n||"utf-8";return c.node("link",{id:"jet_load_"+f,type:"text/css",charset:r,rel:"stylesheet",href:e},t)},u=function(e,t,n,r){var i=n||"utf-8",o=c.node("script",{id:"jet_load_"+f,type:"text/javascript",charset:i,src:e},t);return r&&o.setAttribute("defer","defer"),o},"script"===t?o=i.node||u(n,C,L,b):"css"===t&&(o=i.node||a(n,C,L)),e.browser.engine.trident&&9>parseInt(e.browser.ie)?o.onreadystatechange=function(){var e=this.readyState;("loaded"===e||"complete"===e)&&(o.onreadystatechange=null,v||(y=!0,window.clearTimeout(p),p=null,m={},m.id=f,m.uri=n,m.arguments=E,S(m),T(m)))}:e.browser.engine.webkit?l.on(o,"load",function(){var e;v||(y=!0,window.clearTimeout(p),p=null,e={},e.id=f,e.uri=n,e.arguments=E,S(e),T(e),"script"===t&&d(f))}):(o.onload=function(){var e;v||(y=!0,window.clearTimeout(p),p=null,e={},e.id=f,e.uri=n,e.arguments=i.arguments,S(e),T(e),"script"===t&&d(f))},o.onerror=function(e){var t;v||(y=!0,window.clearTimeout(p),p=null,t={},t.id=f,t.uri=n,t.arguments=E,t.error=e,x(t),T(t),d(f))}),i.node?"script"===t?o.src=n:"css"===t&&(o.href=n):g.appendChild(o),"script"===t&&k&&(p=window.setTimeout(function(){var e;y||(v=!0,e={},e.uri=n,e.arguments=E,_(e),T(e),d(f))},k));var O=function(e){this._node=e,this._head=g};return O.prototype={abort:function(){this._node.src="",this._head.removeChild(this._node),delete this._node}},new O(o)},r.Id=0,i=function(e,t){return r("css",e,t)},o=function(e,t){return r("script",e,t)};var u,f={_iframes:[],_tick:0,_select:function(){return this._tick++,this._iframes[(this._tick-1)%this._len]},init:function(e){if(1!=this._isInit){this._len=e;for(var t=document.body,n=0;e>n;n++)u=c.node("div",{"class":"RPCService_hDiv"}),c.hide(u),u.innerHTML='<iframe id="RPCService_hIframe_'+n+'" name="RPCService_hIframe_'+n+'" src="'+alloy.CONST.MAIN_URL+'domain.html"></iframe>',t.appendChild(u),this._iframes[n]=[u,null,"RPCService_hIframe_"+n];this._isInit=!0}},take:function(e){var t=this._select();t[1]&&t[0].removeChild(t[1]),e.setAttribute("target",t[2]),t[1]=e,t[0].appendChild(e)}};a=function(e,t){f.init(2);var n={method:t.method||"GET",enctype:t.enctype||"",data:t.data||{},onSuccess:t.onSuccess||function(){},onError:t.onError||function(){},onComplete:t.onComplete||function(){},onTimeout:t.onTimeout||function(){},timeout:t.timeout?t.timeout:1e4},r=c.node("form",{"class":"RPCService_form",method:n.method,action:e+"?t="+(new Date).getTime(),enctype:n.enctype});if(Object.prototype.toString.call(n.data).indexOf("String")>-1){var i=c.node("input");i.type="text",i.name=n.data,r.appendChild(i)}else for(var o in n.data){var i=c.node("input");i.type="text",i.name=o,i.setAttribute("value",n.data[o]),r.appendChild(i)}f.take(r),r.submit()},e.http.ajax=t,e.http.comet=n,e.http.load=r,e.http.loadCss=i,e.http.loadScript=o,e.http.formSend=a}),Jx().$package(function(e){e.string=e.string||{};var t,n,r,i,o,a,s,c,l,u,f,p,d,m,h,g,v,y,b,w,E,S,x,T,_,k,L,C,O,A,M,N,I,F,P,D,R,$,H,j,B,X,J,Y,q,W=e.string;t=function(e){return e+""};var U={};n=function(e,t){var r=/\W/.test(e)?Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+e.replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):U[e]=U[e]||n(document.getElementById(e).innerHTML);return t?r(t):r},r=function(e){return r.RE.test(e)},r.RE=/^(?:ht|f)tp(?:s)?\:\/\/(?:[\w\-\.]+)\.\w+/i,i=function(e){var t=null;if(null!==(t=i.RE.exec(e))){for(var n={},r=0,o=i.SPEC.length;o>r;r++){var a=i.SPEC[r];n[a]=t[r+1]}t=n,n=null}return t},o=function(e){for(var t="",n={},r={},o=0,a=i.SPEC.length;a>o;o++){var s=i.SPEC[o];if(e[s]){switch(s){case"scheme":r[s]="://";break;case"pass":n[s]=":";case"user":n.host="@";break;case"port":n[s]=":";break;case"query":n[s]="?";break;case"fragment":n[s]="#"}s in n&&(t+=n[s]),s in e&&(t+=e[s]),s in r&&(t+=r[s])}}return n=null,r=null,e=null,t},i.SPEC=["scheme","user","pass","host","port","path","query","fragment"],i.RE=/^([^:]+):\/\/(?:([^:@]+):?([^@]*)@)?(?:([^/?#:]+):?(\d*))([^?#]*)(?:\?([^#]+))?(?:#(.+))?$/,a=function(e){var t,n,r,e=e||window.location.href,i=e.indexOf("?"),o=e.substring(i+1).split("&"),a={};if(-1===i)return a;for(t=0;o.length>t;t++)try{if(i=o[t].indexOf("="),n=o[t].substring(0,i),r=o[t].substring(i+1),!(a[n]=unescape(r)))throw Error("uri has wrong query string when run mapQuery.")}catch(s){}return a},s=function(e,t,n){return("string"==typeof t?RegExp(t,n):t).test(e)},c=function(e,t,n){return n?(n+e+n).indexOf(n+t+n)>-1:e.indexOf(t)>-1},l=function(e){return(e+"").replace(/^\s+|\s+$/g,"")},u=function(e){return l(e.replace(/\s+/g," "))},f=function(e){return e.replace(/-\D/g,function(e){return e.charAt(1).toUpperCase()})},p=function(e){return e.replace(/[A-Z]/g,function(e){return"-"+e.charAt(0).toLowerCase()})},d=function(e){return e.replace(/\b[a-z]/g,function(e){return e.toUpperCase()})},m=function(e){return e.replace(/([-.*+?^${}()|[\]\/\\])/g,"\\$1")},h=function(e,t){return parseInt(e,t||10)},g=function(e){return parseFloat(e)},v=function(e){return(e+"").replace(/\r/gi,"").replace(/\n/gi,"")},y=function(e){return(e+"").replace(/&/gi,"&amp;").replace(/\\/gi,"&#92;").replace(/\'/gi,"&#39;").replace(/\"/gi,"&quot;").replace(/</gi,"&lt;").replace(/>/gi,"&gt;").replace(/ /gi,"&nbsp;").replace(/\r\n/g,"<br />").replace(/\n\r/g,"<br />").replace(/\n/g,"<br />").replace(/\r/g,"<br />")},b=function(e){return(e+"").replace(/\\/gi,"\\").replace(/\'/gi,"'").replace(/\"/gi,"'")},S=function(e,t){var n=e.match(/^#?(\w{1,2})(\w{1,2})(\w{1,2})$/);return n?n.slice(1).hexToRgb(t):null},x=function(e,t){var n=e.match(/\d{1,3}/g);return n?n.rgbToHex(t):null},T=function(e,t){var n="",r=e.replace(/<script[^>]*>([\s\S]*?)<\/script>/gi,function(){return n+=arguments[1]+"\n",""});return t===!0?$exec(n):"function"==$type(t)&&t(n,r),r},w=function(e,t){return encodeURIComponent(e+"")+"="+encodeURIComponent(t+"")},E=function(e){var t=[];for(var n in e)t.push(w(n,e[n]));return t.join("&")},_=function(e,t,n){return e.replace(n||/\\?\{([^{}]+)\}/g,function(e,n){return"\\"==e.charAt(0)?e.slice(1):void 0!=t[n]?t[n]:""})},k=function(e,t,n,r){return RegExp.prototype.isPrototypeOf(t)?e.replace(t,n):e.replace(RegExp(t,r?"gi":"g"),n)},L=function(e,t){return t=t||2,e.replace(/[^\x00-\xff]/g,{2:"aa",3:"aaa"}[t]).length},C=function(e,t){return e.substring(0,e.length-t)},O=function(e,t){for(var n=e;L(n)>t;)n=C(n,1);return n},A=function(e){return-1!==e.search(/^\d+$/)?!0:!1},M=function(e){return-1!==e.search(/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/)?!0:!1};var N=function(e){return e=e.replace(/&/g,"&amp;"),e=e.replace(/>/g,"&gt;"),e=e.replace(/</g,"&lt;"),e=e.replace(/"/g,"&quot;"),e=e.replace(/'/g,"&#39;")},I=function(e){return e=e.replace(/&amp;/g,"&"),e=e.replace(/&gt;/g,">"),e=e.replace(/&lt;/g,"<"),e=e.replace(/&quot;/g,'"'),e=e.replace(/&#39;/g,"'")},F=function(e){return e=e.replace(/&amp;/g,"&"),e=e.replace(/&gt;/g,">"),e=e.replace(/&lt;/g,"<"),e=e.replace(/\\\\"/g,'"'),e=e.replace(/\\\\'/g,"'")},P=function(e){return e=e.replace(/&/g,"&amp;"),e=e.replace(/>/g,"&gt;"),e=e.replace(/</g,"&lt;"),e=e.replace(/"/g,"&quot;"),e=e.replace(/'/g,"&#39;"),e=e.replace(/=/g,"&#61;"),e=e.replace(/`/g,"&#96;")},R=function(e){return e.replace(/[&'"<>\/\\\-\x00-\x09\x0b-\x0c\x1f\x80-\xff]/g,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/ /g,"&nbsp;").replace(/\r\n/g,"<br />").replace(/\n/g,"<br />").replace(/\r/g,"<br />")},D=function(e){return e.replace(/[&'"<>\/\\\-\x00-\x1f\x80-\xff]/g,function(e){return"&#"+e.charCodeAt(0)+";"})},$=function(e){return e+="",e.replace(/[\\"']/g,function(e){return"\\"+e}).replace(/%/g,"\\x25").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\x01/g,"\\x01")},H=function(e){return R(B(escScript(e)))},j=function(e){return e.replace(/[\\\^\$\*\+\?\{\}\.\(\)\[\]]/g,function(e){return"\\"+e})},B=function(e){return escape(e).replace(/\+/g,"%2B")},X=function(e){return e=encodeURIComponent(e),e=e.replace(/~/g,"%7E"),e=e.replace(/!/g,"%21"),e=e.replace(/\*/g,"%2A"),e=e.replace(/\(/g,"%28"),e=e.replace(/\)/g,"%29"),e=e.replace(/'/g,"%27"),e=e.replace(/\?/g,"%3F"),e=e.replace(/;/g,"%3B")},J=function(e){return/^(https?:\/\/)?[\w\-.]+\.(qq|paipai|soso|taotao)\.com($|\/|\\)/i.test(e)||/^[\w][\w\/\.\-_%]+$/i.test(e)||/^[\/\\][^\/\\]/i.test(e)?!0:!1},Y=function(e){var e=encodeURI(e).replace(/(^\s*)|(\s*$)/g,""),t=/(^[a-zA-Z0-9]+[^.]):/,n=/^[\S.]+\.[\S.]+$/,r=/[\w.]+\/(\S*)/,i=/^[\s*]*javascript[\s*]*:/;return t.test(e)||n.test(e)?(t.test(e)||(e="http://"+e),r.test(e)||(e+="/"),i.test(e)&&(e="")):e="",e},q=function(t,n){var r=document.createElement("div");r.style.visibility="hidden",r.style.width="auto",n&&(r.style.fontSize=n+"px"),r.style.position="absolute",r.innerHTML=e.string.encodeHtmlSimple(t),document.body.appendChild(r);var i=r.offsetWidth;return document.body.removeChild(r),i},z=function(e,t,n){for(var r=e.length;r>=0;--r)if(e=e.substring(0,r),n>q(e,t))return e;return""};W.cutByWidth=z,W.toString=t,W.template=n,W.isURL=r,W.parseURL=i,W.buildURL=o,W.mapQuery=a,W.test=s,W.contains=c,W.trim=l,W.clean=u,W.camelCase=f,W.hyphenate=p,W.capitalize=d,W.escapeRegExp=m,W.toInt=h,W.toFloat=g,W.toSingleLine=v,W.toHtml=y,W.toTitle=b,W.toQueryPair=w,W.toQueryString=E,W.hexToRgb=S,W.rgbToHex=x,W.stripScripts=T,W.substitute=_,W.replaceAll=k,W.byteLength=L,W.cutRight=C,W.isNumber=A,W.isEmail=M,W.cutByBytes=O,W.encodeHtmlSimple=N,W.decodeHtmlSimple=I,W.decodeHtmlSimple2=F,W.encodeHtmlAttributeSimple=P,W.encodeHtmlAttribute=D,W.encodeHtml=R,W.encodeScript=$,W.encodeHrefScript=H,W.encodeRegExp=j,W.encodeUrl=B,W.encodeUriComponent=X,W.vaildTencentUrl=J,W.vaildUrl=Y,W.getCharWidth=q}),Jx().$package(function(J){var JSON={};(function(){function f(e){return 10>e?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,o,a,s=gap,c=t[e];switch(c&&"object"==typeof c&&"function"==typeof c.toJSON&&(c=c.toJSON(e)),"function"==typeof rep&&(c=rep.call(t,e,c)),typeof c){case"string":return quote(c);case"number":return isFinite(c)?c+"":"null";case"boolean":case"null":return c+"";case"object":if(!c)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(c)){for(o=c.length,n=0;o>n;n+=1)a[n]=str(n,c)||"null";return i=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+s+"]":"["+a.join(",")+"]",gap=s,i}if(rep&&"object"==typeof rep)for(o=rep.length,n=0;o>n;n+=1)r=rep[n],"string"==typeof r&&(i=str(r,c),i&&a.push(quote(r)+(gap?": ":":")+i));else for(r in c)Object.hasOwnProperty.call(c,r)&&(i=str(r,c),i&&a.push(quote(r)+(gap?": ":":")+i));return i=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+s+"}":"{"+a.join(",")+"}",gap=s,i}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,n){var r;if(gap="",indent="","number"==typeof n)for(r=0;n>r;r+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&"object"==typeof i)for(n in i)Object.hasOwnProperty.call(i,n)&&(r=walk(i,n),void 0!==r?i[n]=r:delete i[n]);return reviver.call(e,t,i)}var j;if(cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})})(),J.json=JSON}),Jx().$package(function(e){var t=(e.dom.id,e.dom),n=e.event;e.ui=e.ui||{};var r=0;e.ui.MaskLayer=new e.Class({_getMaskId:function(){return r++},init:function(r){r=r||{};var i=this._getMaskId(),o=this;this._initZIndex=r.zIndex=e.isUndefined(r.zIndex)?9e6:r.zIndex,this._initOpacity=r.opacity=e.isUndefined(r.opacity)?.5:r.opacity,r.appendTo=r.appendTo||document.body,r.className=r.className||"",this.option=r,this.container=t.node("div",{id:"ui_maskLayer_"+i,"class":"ui_maskLayer "+r.className});var a='<div id="ui_maskLayerBody_'+i+'" class="ui_maskLayerBody"></div>';e.browser.ie&&(a+='<iframe class="ui_maskBgIframe"></iframe>'),this.container.innerHTML=a,this.reset(),r.appendTo.appendChild(this.container);var s={onMaskLayerClick:function(){n.notifyObservers(o,"click",o)}};n.on(this.container,"click",s.onMaskLayerClick),this.body=t.id("ui_maskLayerBody_"+i)},getElement:function(){return this.container},append:function(e){this.body.appendChild(e)},show:function(){t.show(this.container),n.notifyObservers(this,"show"),this._isShow=!0},hide:function(){t.hide(this.container),n.notifyObservers(this,"hide"),this._isShow=!1},isShow:function(){return this._isShow},toggleShow:function(){this.isShow()?this.hide():this.show()},getZIndex:function(){return this._zIndex},setZIndex:function(e){t.setStyle(this.container,"zIndex",e),this._zIndex=e},setOpacity:function(e){t.setStyle(this.container,"opacity",e)},reset:function(){return this.setOpacity(this._initOpacity),this.setZIndex(this._initZIndex),this},fadeIn:function(){this.show()},fadeOut:function(){this.hide()},remove:function(){this.option.appendTo&&this.option.appendTo.removeChild(this.container)}})}),Jx().$package(function(e){var t,n,r,i,o,a,s,c,l,u=e.dom,f=e.event,p=function(e){e.preventDefault()},d=!1,m=!1,h=!1,g=!1,v=9e6;e.ui=e.ui||{},e.ui.ScrollDrag=new e.Class({init:function(y,b,w){var E,S,x,T,_,k=this;this.apperceiveEl=y,w=w||{},this.isLimited=w.isLimited||!1,this.dragType=w.dragType,this.isLocked=w.isLocked||!1,this.isLockCursorInScreen=w.isLockCursorInScreen||!1,this.checkTarget=w.checkTarget||null,this.setEffectElDynamicly=w.setEffectElDynamicly||null;var L=!1;this.isLimited&&(this._leftMargin=w.leftMargin||0,this._topMargin=w.topMargin||0,this._rightMargin=w.rightMargin||0,this._bottomMargin=w.bottomMargin||0),w.xOnly&&(this._xOnly=w.xOnly||!1),w.yOnly&&(this._yOnly=w.yOnly||!1),this.effectEl=b===!1?!1:b||y,w.listeners&&f.addObservers({targetModel:this,eventMapping:w.listeners}),this.dragStart=function(e){if(!(k.checkTarget&&!k.checkTarget(e)||k.setEffectElDynamicly&&(k.effectEl=k.setEffectElDynamicly(e),!k.effectEl))){if(e.changedTouches){if(e.changedTouches.length>1)return;e=e.changedTouches[0],document.body.style.WebkitTouchCallout="none"}else e.preventDefault(),e.stopPropagation();k.dragStartIn(e.pageX,e.pageY)}},this.dragStartIn=function(y,b){if(!k.isLocked){f.notifyObservers(k,"beforeStart",{effectEl:k.effectEl}),f.notifyObservers(document,"beforeStart",{effectEl:k.effectEl}),t=u.getClientWidth(),n=u.getClientHeight(),_workAreaClientWidth=w.clientEl?u.getClientWidth(w.clientEl):t,_workAreaClientHeight=w.clientEl?u.getClientHeight(w.clientEl):n,d=w.clientEl?u.getScrollWidth(w.clientEl):t,m=w.clientEl?u.getScrollHeight(w.clientEl):n,h=k.effectEl?parseInt(u.getClientWidth(k.effectEl)):0,g=k.effectEl?parseInt(u.getClientHeight(k.effectEl)):0,k.isLimited&&(r=d-h-k._rightMargin,i=k._leftMargin,o=k._topMargin,a=m-g-k._bottomMargin),l||(l=new e.ui.MaskLayer({opacity:0})),l.setZIndex(v),l.show();var L=k.effectEl?k.getPos(k.effectEl):{left:0,top:0};if(k._oldX=E=L.left,k._oldY=S=L.top,x=y,T=b,_=w.clientEl?u.getScrollTop(w.clientEl):0,e.browser.mobileSafari){f.on(document,"touchmove",k.dragMove),f.on(document,"touchend",k.dragStop);var C=new WebKitCSSMatrix(window.getComputedStyle(k.apperceiveEl).webkitTransform);s=y-C.m41,c=b-C.m42}else f.on(document,"mousemove",k.dragMove),f.on(document,"mouseup",k.dragStop);e.browser.ie&&f.on(document.body,"selectstart",p),e.browser.mobileSafari?f.notifyObservers(k,"start",{x:y,y:b,effectEl:k.effectEl}):f.notifyObservers(k,"start",{x:E,y:S,effectEl:k.effectEl})}},this.dragMove=function(l){if(!k.isLocked){l.browserEvent?(l.browserEvent.preventDefault(),l.browserEvent.stopPropagation()):(l.preventDefault(),l.stopPropagation()),l.changedTouches&&(l=l.changedTouches[0]);var p,d,m=l.pageX,h=l.pageY,v=w.clientEl?u.getScrollTop(w.clientEl):0;if(k.isLockCursorInScreen&&(0>m?m=0:m>t?m=t:0,0>h?h=0:h>n?h=n:0),e.browser.mobileSafari||(p=E+(m-x),d=S+(h-T)+(v-_)),k.isLimited&&(p>r&&!w.isOverRight&&(p=r),i>p&&!w.isOverLeft&&(p=i)),k._oldX===p||k._yOnly||(k._oldX=p,k.effectEl&&!e.browser.mobileSafari&&(k.effectEl.style.left=p+"px"),L=!0),k.isLimited){d>a&&!w.isOverBottom&&(d=a),o>d&&!w.isOverTop&&(d=o);var y=_workAreaClientHeight-g+u.getScrollTop(w.clientEl),b=u.getScrollTop(w.clientEl);if(d>=y)return d=y,f.notifyObservers(k,"overViewBorder",{dir:1,x:p,y:d,originEvent:l,effectEl:k.effectEl}),void 0;if(b>=d)return d=b,f.notifyObservers(k,"overViewBorder",{dir:-1,x:p,y:d,originEvent:l,effectEl:k.effectEl}),void 0}k._oldY===d||k._xOnly||(k._oldY=d,k.effectEl&&!e.browser.mobileSafari&&(k.effectEl.style.top=d+"px"),L=!0);var C=p,O=d;if(k.effectEl&&e.browser.mobileSafari){k._oldX=E+(m-x),k._oldY=S+(h-T);var A=h;p=k._yOnly?E:m-s,d=k._xOnly?S:A-c,k.effectEl.style.webkitTransform="translate3d("+p+"px, "+d+"px, 0px)",C=m,O=h}L&&f.notifyObservers(k,"move",{x:C,y:O,originEvent:l,effectEl:k.effectEl})}},this.dragStop=function(t){if(l.hide(),!k.isLocked){if(document.body.style.WebkitTouchCallout="auto",L||e.browser.mobileSafari){var n=k._oldX,s=k._oldY;k.isLimited&&(n>r&&!w.isOverRight&&(n=r),i>n&&!w.isOverLeft&&(n=i)),k.isLimited&&(s>a&&!w.isOverBottom&&(s=a),o>s&&!w.isOverTop&&(s=o)),e.browser.mobileSafari?(t.preventDefault(),w.noEndCallback&&k.effectEl&&(k.effectEl.style.webkitTransform="none",u.setStyle(k.effectEl,"left",n+"px"),u.setStyle(k.effectEl,"top",s+"px")),f.notifyObservers(k,"end",{x:n,y:s,originEvent:t.changedTouches[0],effectEl:k.effectEl})):f.notifyObservers(k,"end",{x:n,y:s,originEvent:t,effectEl:k.effectEl})}else f.notifyObservers(k,"end",{originEvent:t,effectEl:k.effectEl});if(k.isLimited&&(k.isOverRight||k.isOverLeft||k.isOverTop||k.isOverBottom)){var n=E+(t.pageX-x),s=S+(t.pageY-T),c=d-h-k._rightMargin,v=k._leftMargin,y=m-k._bottomMargin,b=k._topMargin;(n>c||v>n||s>y||b>s)&&f.notifyObservers(k,"overFlowBorder",{x:n,y:s,effectEl:k.effectEl})}d=!1,m=!1,h=!1,g=!1,e.browser.mobileSafari?(f.off(document,"touchmove",k.dragMove),f.off(document,"touchend",k.dragStop)):(f.off(document,"mousemove",k.dragMove),f.off(document,"mouseup",k.dragStop)),e.browser.ie&&f.off(document.body,"selectstart",p),L=!1}},f.on(this.apperceiveEl,"drag",this.dragStart)},setEffect:function(e){this.effectEl=e},lock:function(){this.isLocked=!0,f.off(this.apperceiveEl,"drag",this.dragStart)},unlock:function(){this.isLocked=!1,f.on(this.apperceiveEl,"drag",this.dragStart)},show:function(){u.show(this.apperceiveEl)},hide:function(){u.hide(this.apperceiveEl)},setLimite:function(e){e=e||{},this.isLimited=e.isLimited||!0,this.isLimited&&(this._leftMargin=e.leftMargin||0,this._topMargin=e.topMargin||0,this._rightMargin=e.rightMargin||0,this._bottomMargin=e.bottomMargin||0)},getPos:function(e){for(var t=["left","top"],n=["clientWidth","clientHeight"],r={},i=t.length;i--;){var o=u.getStyle(e,t[i]);if(-1!==o.indexOf("%")){for(var a=e.parentNode;a!==document.body||"static"===u.getStyle(a,"position")||""===u.getStyle(a,"position");)a=a.parentNode;o=parseInt(a[n[i]]*parseInt(o)/100)}else o=parseInt(o)||0;r[t[i]]=o}return r}})}),Jx().$package(function(e){var t=(e.dom,e.event);e.ui=e.ui||{},e.ui.xInput=new e.Class({init:function(n,r){this.element=n,r||(r={}),this.min=r.min||0,this.max=r.max||100,this.rate=r.rate||10,this.canBeFloat=r.canBeFloat||!1,this.accuracy=r.accuracy||2,this.suffix=r.suffix||"",this.step=r.step||1,this.maskLayer=r.maskLayer,this.onChange=r.onChange||null,this.onDragStart=r.onDragStart||null,this.onDragEnd=r.onDragEnd||null,this.onBlur=r.onBlur||null,this.mousedown=e.bind(this.mousedown,this),this.mousemove=e.bind(this.mousemove,this),this.mouseup=e.bind(this.mouseup,this),this.blur=e.bind(this.blur,this),this.element.style.cursor="n-resize",t.on(this.element,"mousedown",this.mousedown),t.on(this.element,"blur",this.blur)},checkValue:function(){var e=this.canBeFloat?parseFloat(this.element.value):parseInt(this.element.value);isNaN(e)?e=this.min:e>this.max?e=this.max:this.min>e&&(e=this.min),this.value=e,this.element.value=(this.canBeFloat?e.toFixed(this.accuracy):e)+this.suffix},mousedown:function(e){return this.checkValue(),this.lastValue=this.value,this.pointer={left:e.pageX,top:e.pageY},this.maskLayer.show(),t.on(document,"mousemove",this.mousemove),t.on(document,"mouseup",this.mouseup),this.onDragStart&&this.onDragStart(),this.mousemove(e),this.isDragging=!0,!1},mousemove:function(e){var t=this.value;return t-=(e.pageY-this.pointer.top)*this.step/this.rate,this.canBeFloat||(t=~~t),t>this.max?t=this.max:this.min>t&&(t=this.min),t!==this.lastValue&&(this.lastValue=t=this.canBeFloat?t.toFixed(this.accuracy):t,this.element.value=t+this.suffix,this.onChange&&this.onChange(t,this.element)),!1},mouseup:function(){return t.off(document,"mousemove",this.mousemove),t.off(document,"mouseup",this.mouseup),this.maskLayer.hide(),this.isDragging=!1,this.onDragEnd&&this.onDragEnd(),!1},blur:function(){this.checkValue(),this.onBlur&&this.onBlur(this.value,this.element)}})}),Jx().$package(function(e){e.dom,e.event,e.ui=e.ui||{},e.ui.FullScreen=new e.Class({init:function(){this._checkSupport(),this.isSupported&&this._checkFunc()},_checkSupport:function(){if(document.cancelFullScreen!==void 0)this.isSupported=!0,this.prefix="";else for(var e=["webkit","moz","o","ms","khtml"],t=0,n=e.length;n>t;t++)if(document[e[t]+"CancelFullScreen"]!==void 0){this.isSupported=!0,this.prefix=e[t];break}},_checkFunc:function(){this.fullScreenChangeEventName=this.prefix+"fullscreenchange",this.isFullScreen=function(){switch(this.prefix){case"":return document.fullScreen;case"webkit":return document.webkitIsFullScreen;default:return document[this.prefix+"FullScreen"]}},this.requestFullScreen=function(e){switch(e||(e=document.documentElement),this.prefix){case"":return e.requestFullScreen();case"webkit":return e.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT);default:return e[this.prefix+"RequestFullScreen"]()}},this.cancelFullScreen=function(){return""===this.prefix?document.cancelFullScreen():document[this.prefix+"CancelFullScreen"]()}}})}),Jx().$package(function(e){var t=e.dom,n=function(e){var t,n=!0,r=0,i=0;return{getInfo:function(){if(n===!0)return n=!1,t=+new Date,{elapsedTime:0,coeff:0,FPS:0,averageFPS:0};var o=+new Date,a=o-t;t=o;var s=1e3/a;return i++,r+=s,{elapsedTime:a,coeff:e/s,FPS:s,averageFPS:r/i}},pause:function(){n=!0}}};e.ui=e.ui||{},e.ui.Fps=new e.Class({init:function(){var e='<div class="jxFpsPanel">					<p>FPS: <span class="jxFps"></span></p>					<p>Average FPS: <span class="jxAverFps"></span></p>					<p>Time Coefficient: <span class="jxCoeff"></span></p>				</div>';this.domPanel=t.xnode(e),this.domFps=t.mini(".jxFps",this.domPanel)[0],this.domAverFps=t.mini(".jxAverFps",this.domPanel)[0],this.domCoeff=t.mini(".jxCoeff",this.domPanel)[0],document.body.appendChild(this.domPanel),this.timer=n(60)},log:function(){var e=this.info=this.timer.getInfo();return this.domFps.innerHTML=Math.floor(e.FPS),this.domAverFps.innerHTML=Math.floor(e.averageFPS),this.domCoeff.innerHTML=e.coeff.toFixed(2),e},pause:function(){return this.timer.pause(),console.log("averageFPS: ",this.info.averageFPS),this}})});