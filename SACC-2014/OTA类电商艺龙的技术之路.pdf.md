T    

-OTA
@Syupei
 

1x products 2 core business 2x ' 000 + orders 4K+ Servers 300+ Developers
VM 



















10


Hotel


Air

  

2011 2012 2013 2014
Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec


20

18

16

14

12

10

8

6

4

2

0

11-08

12-10

13-10

14

06113W6113















1111 10%50% 

.N SQL-Server





Before 2012

Windows IIS



 ASP

 Win FTP  ASP  1 2 3

Skymap MySQL

J

Erlang

C++

Now !

LAMP

OpenSouce

A

Distributed

12 Linux C/C++Erlang JavaPHP MySQL    

Skymap Fast-Env Building Distributed Library Search Pavo


Skymap Automatic operation system

 Deploy  Task Controller  Monitor  Log Collection  Login Security  Resource Location
Skymap

 3,000   5,500   300 GB  230G  2,260,000,000 
Everyday

Skymap Automatic operation system
What's the difference ?
 WinLinux Win

Skymap Automatic operation system

Leo: Controller

         Erlang OTP 
 RESTful API

Server agent

4'000+ Servers Installed

Leo PPT Erlang-OTP123

Skymap Automatic operation system

Sag: Service Meta
     

Apus: Deploy

    
 

Leo: Controller

Server agent
  

Skymap Automatic operation system
Apus: Deploy OP

Meta

Apus

Leo

RD

SVN CI

Auto Build

QA

11-0-0-0-0-1 1-0-0-2 1-0-0-3 1-0-0-4

FTP
Agent

Puppet CI

Skymap Automatic operation system
Web  

Skymap Automatic operation system

Leo
Agent

Monitor Flume Rabbit MQ Socket
FTP

HDFS HBASE

       
 Erlang OTP         

   

Skymap Automatic operation system
Scutum: SSH Security Pyxis: Resource Location Hor: Task Scheduler ......
 Scutumsu work root PyxisZK HorErlangLeo 

Fast-Env Building
30' Minutes Building Full Sites
  30Skymap API

 Why Not ZK ?  Based on Raft  C/Java/GDoi/sEtrilbauntgedLibLirbarayry  How to use it ?  Who used ?
  11IDC26
ZKZK1MZK paxospaxos20135raft paper raftraft   ID 

runtime state store

Node1

Node2 Slave

Master
control Node3 Slave

connect

Node list

Client

Client

state report ......
......

HASH 

Search
   

Search

Web DA AS / BS

Brief

Index

DC

Base MIS

RatePlan

     

13 MIS-->BASE-->-->-->BS(AS BriefMangoDB BaseIndex  RatePlan--DC Query

Search DC

Load Balancing

Proxy

Proxy

Slice 1 Group Index Building Memory Index
Calc & API

Slice 2 Group Index Building Memory Index
API

Slice 3 Group Index Building Memory Index
Calc & API

Slice Sequence Raw-Index Hotel-MIS

  HashMap + SortedSet  Buf  
10'000  / 
tps qps 50ms 600

DC  H5MobileQ4   

Pavo image services

List 1024

iPhone Alt

Galaxy 1024

Pavo
P

Icon 800

Pavo,PavoSkymap
MIS  

Pavo image services

Nginx Consistency Hash

Squid

Squid

Squid

Tag Meta

ImgMaker

Storage

 35'000'000+ images  30 tags  95% Cache Hit  5000/sec generated in realtime

Pavo   CPU
squid15Metameta304

Pavo image services
http://pavo.elong.com/ipad/ 0ae9f.jpg
ipad: { width:800px; height:600px; align:center; vertical:middle; wm: true; dm: true;
}
TagTag TagHTTP-Header 

ZhiziDocker No Cache
Future 2015 No Windows Personalised recommendations
 DockerVM15 NocachecachecacheCache  WinSQL Server 

Summary
1   2Hold  3 4 

 -
  QA....Erlang.Golang.  pei.yu@corp.elong.com

